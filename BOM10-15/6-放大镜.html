<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>放大镜</title>
		<style>
			*{
				margin: 0;
				padding: 0;
			}
			.box,.box1{
				position: relative;
				float: left;
				margin-right: 20px;
				width: 420px;
				height: 500px;
				margin: 30px;
				border: 1px solid red;
			}
			.box img{
				width: 100%;
				height: 100%;
			}
			.inner{
				position: absolute;
				top: 0;
				left: 0;
				width: 100px;
				height: 100px;
				background-color: rgba(0,0,0,.4);
			}
			
			.box1{0
				overflow: hidden;
			}
			
			.box1 img{
				width: 200%;
				height: 200%;
			}
		</style>
	</head>
	<body>
		<div class="box">
			<img src="../lib/image/bom/1.jpg" alt="">
			<div class="inner"></div>
		</div>
		<div class="box1">
			<img src="../lib/image/bom/1.jpg" alt="">
		</div>
		
		<script type="text/javascript">
			var box = document.querySelector(".box");
			var inner = document.querySelector(".inner");
			var imgEle = document.querySelector(".box1 img");
			
			box.onmousemove = function (){
				// 鼠标距离页面的距离 - 盒子距离页面的距离 = 鼠标在盒子中的距离
				var mouseX = event.pageX - box.offsetLeft;
				var mouseY = event.pageY - box.offsetTop;
				
				// inner的上左边距 = 鼠标在盒子中的位置 - innerWidth/Height的一半
				var targetX = mouseX - inner.offsetWidth/2;
				var targetY = mouseY - inner.offsetHeight/2;
				
				/*
					minX = 0,minY = 0;
					maxX = box.offsetWidth - inner.offsetWidth;
					maxY = box.offsetHeight - inner.offsetHeight;
				*/
				var minX = minY = 0,
						maxX = box.offsetWidth - inner.offsetWidth,
						maxY = box.offsetHeight - inner.offsetHeight;
				if(targetX <= 0){
					targetX = 0;
				}else if(targetX >= maxX){
					targetX = maxX;
				}
				if(targetY <= 0){
					targetY = 0;
				}else if(targetY >= maxY){
					targetY = maxY;
				}
				
				imgEle.style.marginLeft = -2 * targetX + "px";
				imgEle.style.marginTop = -2 * targetY + "px";
				
				inner.style.left = targetX + "px";
				inner.style.top = targetY + "px";
			}
		</script>
	</body>
</html>
